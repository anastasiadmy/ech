<!DOCTYPE html>
<html>
<head>
<title>Cardiac Calculators</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: sans-serif;
  padding: 20px;
}
.calculator {
  border: 1px solid #ccc;
  padding: 15px;
  margin-bottom: 20px;
}
label {
  display: block;
  margin-bottom: 5px;
}
input[type="number"] {
  width: 100%; /* Make input fields responsive */
  padding: 5px;
  margin-bottom: 10px;
  box-sizing: border-box; /* Include padding in width */
}
button {
  padding: 8px 15px;
  background-color: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
  margin-top: 10px;
}
#results {
  margin-top: 20px;
}

/* Responsive Styles */
@media (min-width: 768px) { /* Adjust breakpoint as needed */
  .calculator {
    width: 50%; /* Make calculators wider on larger screens */
    float: left; /* Arrange calculators side by side */
    margin-right: 20px;
  }
  input[type="number"] {
      width: 150px;
  }
}
</style>
</head>
<body>

<h1>Cardiac Calculators</h1>

<div class="calculator">
  <h2>BSA Calculator</h2>
  <label for="height">Height (cm):</label>
  <input type="number" id="height" value="0">
  <label for="weight">Weight (kg):</label>
  <input type="number" id="weight" value="0">
  <p>BSA (m²): <span id="bsa"></span></p>
</div>

<div class="calculator">
  <h2>LV Mass & RWT Calculator</h2>
  <label for="ivs">IVS (mm):</label>
  <input type="number" id="ivs" value="0">
  <label for="lvedd_lv">LVEDD (mm):</label>
  <input type="number" id="lvedd_lv" value="0">
  <label for="pw">PW (mm):</label>
  <input type="number" id="pw" value="0">
  <p>LV Mass (g): <span id="lvmass"></span></p>
  <p>LV Mass Index (g/m²): <span id="lvmassindex"></span></p>
  <p>RWT: <span id="rwt"></span></p>
</div>

<div class="calculator">
  <h2>ESV, EDV, EF (Teichholz)</h2>
  <label for="lvedd_teich">LVEDD (mm):</label>
  <input type="number" id="lvedd_teich" value="0">
  <label for="lvesd_teich">LVESD (mm):</label>
  <input type="number" id="lvesd_teich" value="0">
  <p>EDV (ml): <span id="edv"></span></p>
  <p>ESV (ml): <span id="esv_teich"></span></p>
  <p>EF (%): <span id="ef_teich"></span></p>
</div>

<div class="calculator">
    <h2>LAVI Calculator</h2>
    <label for="la_volume">LA Volume (ml):</label>
    <input type="number" id="la_volume" value="0">
    <p>LAVI (ml/m²): <span id="lavi"></span></p>
</div>


<button onclick="calculateAll()">Calculate All</button>

<script>
function calculateBSA() {
  const height = parseFloat(document.getElementById("height").value);
  const weight = parseFloat(document.getElementById("weight").value);
  if (isNaN(height) || isNaN(weight)) return; // Don't calculate if inputs are invalid.
  const bsa = Math.sqrt((height * weight) / 3600); // Mosteller formula
  document.getElementById("bsa").textContent = bsa.toFixed(2);
  return bsa; // Return the calculated BSA
}

function calculateLVMassAndRWT() {
  const ivs = parseFloat(document.getElementById("ivs").value);
  const lvedd = parseFloat(document.getElementById("lvedd_lv").value);
  const pw = parseFloat(document.getElementById("pw").value);
  if (isNaN(ivs) || isNaN(lvedd) || isNaN(pw)) return;

  const lvmass = 0.8 * 1.04 * ((ivs + lvedd + pw)**3 - lvedd**3);
  const lvmassindex = lvmass / calculateBSA(); // Use calculated BSA
  const rwt = (2 * pw) / lvedd;

  document.getElementById("lvmass").textContent = lvmass.toFixed(2);
  document.getElementById("lvmassindex").textContent = lvmassindex ? lvmassindex.toFixed(2) : ""; // Handle potential division by zero
  document.getElementById("rwt").textContent = rwt.toFixed(2);
}

function calculateTeichholz() {
    const lvedd = parseFloat(document.getElementById("lvedd_teich").value);
    const lvesd = parseFloat(document.getElementById("lvesd_teich").value);
    if (isNaN(lvedd) || isNaN(lvesd)) return;

    const edv = (7.0 / (2.4 + lvedd)) * lvedd * lvedd * lvedd;
    const esv = (7.0 / (2.4 + lvesd)) * lvesd * lvesd * lvesd;
    const ef = ((edv - esv) / edv) * 100;

    document.getElementById("edv").textContent = edv.toFixed(2);
    document.getElementById("esv_teich").textContent = esv.toFixed(2);
    document.getElementById("ef_teich").textContent = ef.toFixed(2);
}

function calculateLAVI() {
    const laVolume = parseFloat(document.getElementById("la_volume").value);
    const bsa = calculateBSA(); // Use the calculated BSA
    if (isNaN(laVolume) || !bsa) return;

    const lavi = laVolume / bsa;
    document.getElementById("lavi").textContent = lavi.toFixed(2);
}


function calculateAll() {
  calculateBSA();
  calculateLVMassAndRWT();
  calculateTeichholz();
  calculateLAVI();
}
</script>

</body>
</html>
